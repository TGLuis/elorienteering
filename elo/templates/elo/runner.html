<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ELOrienteering</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  </head>
  <body>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-moment"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>

  {% include "header_classic.html" %}
    <div>
        <h1 class="text-center">{{ runner.fullname }}</h1>
      <canvas id="myChart"></canvas>
    </div>
    <script type="text/javascript">
        fetch('/elo/api/runner/{{ runner.pk }}')
            .then(response => response.json())
            .then(data => {
                new Chart(document.getElementById('myChart'), {
                    type: 'line',
                    data: {
                        labels: data.labels,
                        datasets: [{
                            label: 'ELO',
                            data: data.elo,
                            backgroundColor: 'rgba(54, 162, 235, 0.6)'
                        }]
                    },
                    options: {
                        scales: {
                            x: {
                                type: 'time'
                            }
                        }
                    }
                });
            });
    </script>
    <table class="table table-striped">
      <thead>
      <th scope="col">Date</th>
      <th scope="col">Course</th>
      <th scope="col">status</th>
      <th scope="col">new ELO</th>
      </thead>
      <tbody>
        {% for result in results %}
        <tr>
            <td>{{ result.date|date:'d/m/Y' }}</td>
            <td><a href="https://helga-o.com/webres/index.php?lang=fr&lauf={{ result.ranking.course.helga_id }}">{{ result.ranking.course.name }}</a></td>
            <td>{{ result.status }}</td>
            <td>{{ result.new_elo }}</td>
        </tr>
        {% endfor %}
      </tbody>
  </table>

  {% include "footer.html" %}
  </body>
</html>